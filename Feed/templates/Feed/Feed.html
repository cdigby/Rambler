<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
        {% csrf_token %}
        <p> Title: {{ route.title }}</p>
        <p> Description: {{ route.description }}</p>
        <p> Points: {{ route.points }}</p>
        <p> Likes: {{ route.rating }}</p>
        <button name="Like" onclick="like()">Like</button>
        <button name="Like" onclick="dislike()">Dislike</button>

        <script>

            function getCookie(name) {
                let cookieValue = null;
                if (document.cookie && document.cookie !== '') {
                    const cookies = document.cookie.split(';');
                    for (let i = 0; i < cookies.length; i++) {
                        const cookie = cookies[i].trim();
                        // Does this cookie string begin with the name we want?
                        if (cookie.substring(0, name.length + 1) === (name + '=')) {
                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
            }

            function like(){
                var xhr = new XMLHttpRequest();

                console.log("Like")
                xhr.open("POST", "", false);
                xhr.withCredentials = true;

                xhr.setRequestHeader('X-CSRFToken', Cookies.get('csrftoken'));
                xhr.setRequestHeader("Accept", "application/json");

                xhr.send(JSON.stringify({
                    function: "LIKE"
                }));
            }

            function dislike(){
                var xhr = new XMLHttpRequest();
                console.log("Dislike")
                xhr.open("POST", "", false);
                xhr.withCredentials = true;

                xhr.setRequestHeader('X-CSRFToken', Cookies.get('csrftoken'));
                xhr.setRequestHeader("Accept", "application/json");

                xhr.send(JSON.stringify({
                    function: "DISLIKE"
                }));
            }


        </script>

</body>
</html>